
var BLANK = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
var BOARD = [0x24,0x24,0x24,0x24,0xFF,0xFF,0x24,0x24,0x24,0x24,0xFF,0xFF,0x24,0x24,0x24,0x24];

var WIPERS = {
		
	board : [
	[0xFF,0xFF,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0xFF,0xFF],
	[0x42,0x42,0xFF,0xFF,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0xFF,0xFF,0x42,0x42],
	[0x18,0x18,0x18,0x18,0x18,0x18,0xFF,0xFF,0xFF,0xFF,0x18,0x18,0x18,0x18,0x18,0x18]],
	
	vertical : [
	[0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01],
	[0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02],
	[0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04],
	[0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08],
	[0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10],
	[0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20],
	[0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40],
	[0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80]],
	
	horizontal : [
	[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF],
	[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00],
	[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00],
	[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00],
	[0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00],
	[0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00],
	[0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00],
	[0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]],
	
	diagonal : [
	[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01],
	[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x02,0x02],
	[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x02,0x02,0x04,0x04],
	[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x02,0x02,0x04,0x04,0x08,0x08],
	[0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10],
	[0x00,0x00,0x00,0x00,0x01,0x01,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20],
	[0x00,0x00,0x01,0x01,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x40,0x40],
	[0x01,0x01,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x40,0x40,0x80,0x80],
	[0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x40,0x40,0x80,0x80,0x00,0x00],
	[0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x40,0x40,0x80,0x80,0x00,0x00,0x00,0x00],
	[0x08,0x08,0x10,0x10,0x20,0x20,0x40,0x40,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00],
	[0x10,0x10,0x20,0x20,0x40,0x40,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00],
	[0x20,0x20,0x40,0x40,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00],
	[0x40,0x40,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00],
	[0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]]
};

var COMPUTER_PLAYERS = {
    mrRandom : [0x00,0x00,0x06,0x00,0x09,0x00,0xD1,0x00,0xD1,0x00,0x01,0x00,0x06,0x00,0x00,0x00],
    oneder :   [0x00,0x00,0x80,0x80,0xC0,0xC0,0xFF,0xFF,0xFF,0xFF,0xC6,0xC6,0x86,0x86,0x00,0x00],
    catWoman : [0x0E,0x0E,0x05,0x05,0x2E,0x0E,0x20,0x00,0xE0,0x00,0x20,0x09,0x20,0x09,0x00,0x06],
};

var SPLASH_SCREENS = {
	tic_T : [0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x0F,0x00,0x01,0x00],
	tic_I : [0x00,0x00,0x00,0x09,0x00,0x0F,0x00,0x09,0x00,0x00,0x01,0x00,0x0F,0x00,0x01,0x00],
	tic_C : [0x00,0x00,0x00,0x09,0xA0,0xAF,0xA0,0xA9,0xE0,0xE0,0x01,0x00,0x0F,0x00,0x01,0x00],

	tac_T : [0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x0F,0x0F,0x01,0x01],
	tac_A : [0x0E,0x00,0x05,0x00,0x05,0x00,0x0E,0x00,0x00,0x00,0x01,0x01,0x0F,0x0F,0x01,0x01],
	tac_C : [0x0E,0x00,0x05,0x00,0x05,0xA0,0x0E,0xA0,0x00,0xE0,0x01,0x01,0x0F,0x0F,0x01,0x01],

	toe_T : [0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x07,0x00,0x01,0x00,0x00],
	toe_O : [0x07,0x07,0x05,0x05,0x07,0x07,0x00,0x00,0x00,0x01,0x00,0x07,0x00,0x01,0x00,0x00],
    toe_E : [0x07,0x07,0x8D,0x05,0xAF,0x07,0xA8,0x00,0xF8,0x01,0x00,0x07,0x00,0x01,0x00,0x00]
};

var COLOR_MASKS = {
	black :  [0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00],
	green :  [0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00],
	red :    [0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF],
	yellow : [0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF]
};

var GAME_CELLS = [
	[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x03,0x03],
	[0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00],
	[0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00],
	[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x18,0x18],
	[0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00],
	[0x18,0x18,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00],
	[0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0],
	[0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00],
	[0xC0,0xC0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]
];

var IM_RED   = [0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF];
var IM_GREEN = [0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00]; 

var MACHINE = {		
	START : {
		ENTER : ['setButtonColor', 1],		
		TIMEOUT : [2000, 'other'],
        down : 'solidGreen',            
	},
	other : {
		ENTER : ['setButtonColor', 2],
		TIMEOUT : [2000, 'START'],
        down : 'solidRed',            
	},		
	solidRed : {
		ENTER : ['drawImage',IM_RED],
		up : 'START'
	},		
	solidGreen : {
		ENTER : ['drawImage',IM_GREEN],
		up : 'other'
	}		 
}

MACHINE.setButtonColor = function(value) {
	hardware.setButtonColor(value);
}

MACHINE.drawImage = function(value) {
	hardware.drawImage(value);
}

function buttonEventListener(event) {
	runner.handleEvent(event);
}

var runner = require('./FSMRunner.js');

var hardware = require('./Hardware.js');

hardware.init(buttonEventListener, function() {
	runner.init(MACHINE);
});
